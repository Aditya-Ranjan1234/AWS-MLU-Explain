import{SvelteComponent as t,init as e,safe_not_equal as o,element as r,svg_element as l,empty as s,text as n,attr as i,add_render_callback as a,insert as c,append as d,add_resize_listener as f,set_data as m,noop as h,detach as g,destroy_each as x,component_subscribe as u,onMount as y,set_store_value as b}from"../../node_modules/svelte/internal/index.mjs.js";import{gdeHeight as p,gdError as k,gdeWidth as $,gdErrors as v}from"../store.js";import{format as z}from"../../node_modules/d3-format/src/defaultLocale.js";import j from"../../node_modules/d3-scale/src/linear.js";import w from"../../node_modules/d3-array/src/max.js";import _ from"../../node_modules/d3-shape/src/line.js";function E(t,e,o){const r=t.slice();return r[10]=e[o],r[12]=o,r}function B(t,e,o){const r=t.slice();return r[10]=e[o],r}function I(t){let e,o,r,s,a,f,h=t[10]+"";return{c(){e=l("g"),o=l("line"),s=l("text"),a=n(h),i(o,"class","grid-line svelte-67zefo"),i(o,"x1","0"),i(o,"x2","0"),i(o,"y1","0"),i(o,"y2",r=-t[2]+t[8].bottom+t[8].top),i(o,"stroke","black"),i(o,"stroke-dasharray","4"),i(s,"class","axis-text svelte-67zefo"),i(s,"y","15"),i(s,"text-anchor","middle"),i(e,"transform",f=`translate(${t[1](t[10])+0} ${t[2]-t[8].bottom})`)},m(t,r){c(t,e,r),d(e,o),d(e,s),d(s,a)},p(t,l){4&l&&r!==(r=-t[2]+t[8].bottom+t[8].top)&&i(o,"y2",r),2&l&&h!==(h=t[10]+"")&&m(a,h),6&l&&f!==(f=`translate(${t[1](t[10])+0} ${t[2]-t[8].bottom})`)&&i(e,"transform",f)},d(t){t&&g(e)}}}function C(t){let e,o=t[12]%2==0&&function(t){let e,o,r,s,a,f,h=t[10]+"";return{c(){e=l("g"),o=l("line"),s=l("text"),a=n(h),i(o,"class","grid-line svelte-67zefo"),i(o,"x1",5),i(o,"x2",r=t[4]-t[8].right),i(o,"y1","0"),i(o,"y2","0"),i(o,"stroke","black"),i(o,"stroke-dasharray","4"),i(s,"class","axis-text svelte-67zefo"),i(s,"y","0"),i(s,"text-anchor","end"),i(s,"dominant-baseline","middle"),i(e,"transform",f=`translate(${t[8].left-5} ${t[0](t[10])+0})`)},m(t,r){c(t,e,r),d(e,o),d(e,s),d(s,a)},p(t,l){16&l&&r!==(r=t[4]-t[8].right)&&i(o,"x2",r),1&l&&h!==(h=t[10]+"")&&m(a,h),1&l&&f!==(f=`translate(${t[8].left-5} ${t[0](t[10])+0})`)&&i(e,"transform",f)},d(t){t&&g(e)}}}(t);return{c(){o&&o.c(),e=s()},m(t,r){o&&o.m(t,r),c(t,e,r)},p(t,e){t[12]%2==0&&o.p(t,e)},d(t){o&&o.d(t),t&&g(e)}}}function H(t){let e,o,u,y,b,p,k,$,v,z,j,w,_,H,L,M,R,S,W,q,A,D,F,G,J,K,N=t[7](t[3])+"",O=t[1].ticks(),P=[];for(let e=0;e<O.length;e+=1)P[e]=I(B(t,O,e));let Q=t[0].ticks(),T=[];for(let e=0;e<Q.length;e+=1)T[e]=C(E(t,Q,e));return{c(){e=r("div"),o=l("svg");for(let t=0;t<P.length;t+=1)P[t].c();u=s();for(let t=0;t<T.length;t+=1)T[t].c();y=l("line"),k=l("line"),v=l("text"),z=n("Iterations"),_=l("text"),H=n("Error (MSE)"),M=l("path"),S=l("circle"),A=l("text"),D=n(N),i(y,"class","axis-line"),i(y,"y1",b=t[2]-t[8].bottom),i(y,"y2",p=t[2]-t[8].bottom),i(y,"x1",t[8].left),i(y,"x2",t[4]),i(y,"stroke","black"),i(y,"stroke-width","1"),i(k,"class","axis-line"),i(k,"y1",t[8].top),i(k,"y2",$=t[2]-t[8].bottom),i(k,"x1",t[8].left),i(k,"x2",t[8].left),i(k,"stroke","black"),i(k,"stroke-width","1"),i(v,"class","axis-label svelte-67zefo"),i(v,"y",j=t[2]+t[8].bottom-5),i(v,"x",w=(t[4]+t[8].left)/2),i(v,"text-anchor","middle"),i(_,"class","axis-label svelte-67zefo"),i(_,"y",t[8].left/4.8),i(_,"x",L=-t[2]/2),i(_,"text-anchor","middle"),i(_,"transform","rotate(-90)"),i(M,"class","error-line svelte-67zefo"),i(M,"d",R=t[6](t[5])),i(S,"class","regression-circle svelte-67zefo"),i(S,"fill","#c9208a"),i(S,"stroke","black"),i(S,"stroke-width","1.5"),i(S,"r","4.5"),i(S,"cx",W=t[1](t[5][t[5].length-1].iteration)),i(S,"cy",q=t[0](t[5][t[5].length-1].error)),i(A,"class","error-text svelte-67zefo"),i(A,"x",F=t[1](t[5][t[5].length-1].iteration)),i(A,"y",G=t[0](t[5][t[5].length-1].error)),i(o,"width",t[4]),i(o,"height",J=t[2]+t[8].top+t[8].bottom),i(e,"id","scatter-chart"),i(e,"class","svelte-67zefo"),a((()=>t[9].call(e)))},m(r,l){c(r,e,l),d(e,o);for(let t=0;t<P.length;t+=1)P[t].m(o,null);d(o,u);for(let t=0;t<T.length;t+=1)T[t].m(o,null);d(o,y),d(o,k),d(o,v),d(v,z),d(o,_),d(_,H),d(o,M),d(o,S),d(o,A),d(A,D),K=f(e,t[9].bind(e))},p(t,[e]){if(262&e){let r;for(O=t[1].ticks(),r=0;r<O.length;r+=1){const l=B(t,O,r);P[r]?P[r].p(l,e):(P[r]=I(l),P[r].c(),P[r].m(o,u))}for(;r<P.length;r+=1)P[r].d(1);P.length=O.length}if(273&e){let r;for(Q=t[0].ticks(),r=0;r<Q.length;r+=1){const l=E(t,Q,r);T[r]?T[r].p(l,e):(T[r]=C(l),T[r].c(),T[r].m(o,y))}for(;r<T.length;r+=1)T[r].d(1);T.length=Q.length}4&e&&b!==(b=t[2]-t[8].bottom)&&i(y,"y1",b),4&e&&p!==(p=t[2]-t[8].bottom)&&i(y,"y2",p),16&e&&i(y,"x2",t[4]),4&e&&$!==($=t[2]-t[8].bottom)&&i(k,"y2",$),4&e&&j!==(j=t[2]+t[8].bottom-5)&&i(v,"y",j),16&e&&w!==(w=(t[4]+t[8].left)/2)&&i(v,"x",w),4&e&&L!==(L=-t[2]/2)&&i(_,"x",L),96&e&&R!==(R=t[6](t[5]))&&i(M,"d",R),34&e&&W!==(W=t[1](t[5][t[5].length-1].iteration))&&i(S,"cx",W),33&e&&q!==(q=t[0](t[5][t[5].length-1].error))&&i(S,"cy",q),8&e&&N!==(N=t[7](t[3])+"")&&m(D,N),34&e&&F!==(F=t[1](t[5][t[5].length-1].iteration))&&i(A,"x",F),33&e&&G!==(G=t[0](t[5][t[5].length-1].error))&&i(A,"y",G),16&e&&i(o,"width",t[4]),4&e&&J!==(J=t[2]+t[8].top+t[8].bottom)&&i(o,"height",J)},i:h,o:h,d(t){t&&g(e),x(P,t),x(T,t),K()}}}function L(t,e,o){let r,l,s,n,i,a,c;u(t,p,(t=>o(2,n=t))),u(t,k,(t=>o(3,i=t))),u(t,$,(t=>o(4,a=t))),u(t,v,(t=>o(5,c=t))),y((()=>{const t=document.getElementById("scatter-chart").getBoundingClientRect();b($,a=0==a?t.width:a,a),b(p,n=0==n?t.height:n,n)}));const d=z(".3f"),f={top:12,bottom:18,left:40,right:30};return t.$$.update=()=>{48&t.$$.dirty&&o(1,r=j().domain([0,w(c,(t=>t.iteration))+.6*w(c,(t=>t.iteration))]).range([f.left,a-f.right])),12&t.$$.dirty&&o(0,l=j().domain([0,i<200?300:i+.3*i]).range([n-f.bottom,f.top])),3&t.$$.dirty&&o(6,s=_().x((t=>r(t.iteration))).y((t=>l(t.error))))},[l,r,n,i,a,c,s,d,f,function(){a=this.offsetWidth,$.set(a),n=this.offsetHeight,p.set(n)}]}class M extends t{constructor(t){super(),e(this,t,L,H,o,{})}}export{M as default};
