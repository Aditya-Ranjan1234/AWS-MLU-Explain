import{SvelteComponent as t,init as e,safe_not_equal as o,element as l,svg_element as s,empty as n,text as r,attr as i,add_render_callback as c,insert as a,append as d,add_resize_listener as f,listen as m,noop as h,detach as x,destroy_each as g,component_subscribe as p,onMount as u,set_store_value as y,set_data as b,identity as k}from"../../node_modules/svelte/internal/index.mjs.js";import{tweened as j}from"../../node_modules/svelte/motion/index.mjs.js";import{leastSquares as $}from"../utils.js";import{cfWeight as v,cfBias as w,cfCircles as _,cfHeight as C,cfWidth as E}from"../store.js";import{format as L}from"../../node_modules/d3-format/src/defaultLocale.js";import Y from"../../node_modules/d3-scale/src/linear.js";import A from"../../node_modules/d3-shape/src/line.js";import B from"../../node_modules/d3-selection/src/select.js";function T(t,e,o){const l=t.slice();return l[14]=e[o],l}function X(t,e,o){const l=t.slice();return l[17]=e[o],l}function q(t,e,o){const l=t.slice();return l[17]=e[o],l}function H(t){let e,o,l,n,c,f,m=t[8](t[17])+"";return{c(){e=s("g"),o=s("line"),n=s("text"),c=r(m),i(o,"class","grid-line svelte-1ja7xpt"),i(o,"x1","0"),i(o,"x2","0"),i(o,"y1","0"),i(o,"y2",l=-t[2]+t[7].bottom+t[7].top),i(o,"stroke","black"),i(o,"stroke-dasharray","4"),i(n,"class","axis-text svelte-1ja7xpt"),i(n,"y","15"),i(n,"text-anchor","middle"),i(e,"transform",f=`translate(${t[1](t[17])+0} ${t[2]-t[7].bottom})`)},m(t,l){a(t,e,l),d(e,o),d(e,n),d(n,c)},p(t,s){4&s&&l!==(l=-t[2]+t[7].bottom+t[7].top)&&i(o,"y2",l),2&s&&m!==(m=t[8](t[17])+"")&&b(c,m),6&s&&f!==(f=`translate(${t[1](t[17])+0} ${t[2]-t[7].bottom})`)&&i(e,"transform",f)},d(t){t&&x(e)}}}function I(t){let e,o,l,n,c,f,m=t[8](t[17])+"";return{c(){e=s("g"),o=s("line"),n=s("text"),c=r(m),i(o,"class","grid-line svelte-1ja7xpt"),i(o,"x1",5),i(o,"x2",l=t[3]-t[7].right),i(o,"y1","0"),i(o,"y2","0"),i(o,"stroke","black"),i(o,"stroke-dasharray","4"),i(n,"class","axis-text svelte-1ja7xpt"),i(n,"y","0"),i(n,"text-anchor","end"),i(n,"dominant-baseline","middle"),i(e,"transform",f=`translate(${t[7].left-5} ${t[0](t[17])+0})`)},m(t,l){a(t,e,l),d(e,o),d(e,n),d(n,c)},p(t,s){8&s&&l!==(l=t[3]-t[7].right)&&i(o,"x2",l),1&s&&m!==(m=t[8](t[17])+"")&&b(c,m),1&s&&f!==(f=`translate(${t[7].left-5} ${t[0](t[17])+0})`)&&i(e,"transform",f)},d(t){t&&x(e)}}}function R(t){let e,o;return{c(){e=s("path"),i(e,"class","regression-line svelte-1ja7xpt"),i(e,"d",o=t[4](t[6]))},m(t,o){a(t,e,o)},p(t,l){80&l&&o!==(o=t[4](t[6]))&&i(e,"d",o)},d(t){t&&x(e)}}}function S(t){let e,o,l;return{c(){e=s("circle"),i(e,"class","regression-circle svelte-1ja7xpt"),i(e,"fill","#c9208a"),i(e,"stroke","black"),i(e,"stroke-width","1.5"),i(e,"r","4.5"),i(e,"cx",o=t[14].cx),i(e,"cy",l=t[14].cy)},m(t,o){a(t,e,o)},p(t,s){32&s&&o!==(o=t[14].cx)&&i(e,"cx",o),32&s&&l!==(l=t[14].cy)&&i(e,"cy",l)},d(t){t&&x(e)}}}function U(t){let e,o,p,u,y,b,k,j,$,v,w,_,C,E,L,Y,A,B,U=t[1].ticks(),W=[];for(let e=0;e<U.length;e+=1)W[e]=H(q(t,U,e));let z=t[0].ticks(),D=[];for(let e=0;e<z.length;e+=1)D[e]=I(X(t,z,e));let F=t[5].length>1&&R(t),G=t[5],J=[];for(let e=0;e<G.length;e+=1)J[e]=S(T(t,G,e));return{c(){e=l("div"),o=s("svg");for(let t=0;t<W.length;t+=1)W[t].c();p=n();for(let t=0;t<D.length;t+=1)D[t].c();u=s("line"),k=s("line"),F&&F.c(),$=n();for(let t=0;t<J.length;t+=1)J[t].c();v=s("text"),w=r("Live Least-Squares Estimates"),_=s("text"),C=r("Click To Add Circles And Update The Estimates"),E=r("\n\n    >"),i(u,"id","x-axis-line"),i(u,"class","axis-line"),i(u,"y1",y=t[2]-t[7].bottom),i(u,"y2",b=t[2]-t[7].bottom),i(u,"x1",t[7].left),i(u,"x2",t[3]),i(u,"stroke","black"),i(u,"stroke-width","1"),i(k,"id","y-axis-line"),i(k,"class","axis-line"),i(k,"y1",t[7].top),i(k,"y2",j=t[2]-t[7].bottom),i(k,"x1",t[7].left),i(k,"x2",t[7].left),i(k,"stroke","black"),i(k,"stroke-width","1"),i(v,"id","chart-title"),i(v,"y",t[7].top/2),i(v,"x",t[7].left),i(v,"class","svelte-1ja7xpt"),i(_,"id","chart-subtitle"),i(_,"y",t[7].top-5),i(_,"x",t[7].left),i(_,"class","svelte-1ja7xpt"),i(o,"width",t[3]),i(o,"height",L=t[2]+t[7].top+t[7].bottom),i(e,"id","scatter-chart-cf"),i(e,"class","svelte-1ja7xpt"),c((()=>t[13].call(e)))},m(l,s){a(l,e,s),d(e,o);for(let t=0;t<W.length;t+=1)W[t].m(o,null);d(o,p);for(let t=0;t<D.length;t+=1)D[t].m(o,null);d(o,u),d(o,k),F&&F.m(o,null),d(o,$);for(let t=0;t<J.length;t+=1)J[t].m(o,null);d(o,v),d(v,w),d(o,_),d(_,C),d(o,E),Y=f(e,t[13].bind(e)),A||(B=m(o,"click",t[9]),A=!0)},p(t,[e]){if(390&e){let l;for(U=t[1].ticks(),l=0;l<U.length;l+=1){const s=q(t,U,l);W[l]?W[l].p(s,e):(W[l]=H(s),W[l].c(),W[l].m(o,p))}for(;l<W.length;l+=1)W[l].d(1);W.length=U.length}if(393&e){let l;for(z=t[0].ticks(),l=0;l<z.length;l+=1){const s=X(t,z,l);D[l]?D[l].p(s,e):(D[l]=I(s),D[l].c(),D[l].m(o,u))}for(;l<D.length;l+=1)D[l].d(1);D.length=z.length}if(4&e&&y!==(y=t[2]-t[7].bottom)&&i(u,"y1",y),4&e&&b!==(b=t[2]-t[7].bottom)&&i(u,"y2",b),8&e&&i(u,"x2",t[3]),4&e&&j!==(j=t[2]-t[7].bottom)&&i(k,"y2",j),t[5].length>1?F?F.p(t,e):(F=R(t),F.c(),F.m(o,$)):F&&(F.d(1),F=null),32&e){let l;for(G=t[5],l=0;l<G.length;l+=1){const s=T(t,G,l);J[l]?J[l].p(s,e):(J[l]=S(s),J[l].c(),J[l].m(o,v))}for(;l<J.length;l+=1)J[l].d(1);J.length=G.length}8&e&&i(o,"width",t[3]),4&e&&L!==(L=t[2]+t[7].top+t[7].bottom)&&i(o,"height",L)},i:h,o:h,d(t){t&&x(e),g(W,t),g(D,t),F&&F.d(),g(J,t),Y(),A=!1,B()}}}function W(t,e,o){let l,s,n,r,i,c,a,d,f;p(t,v,(t=>o(11,r=t))),p(t,w,(t=>o(12,i=t))),p(t,_,(t=>o(5,c=t))),p(t,C,(t=>o(2,a=t))),p(t,E,(t=>o(3,d=t))),u((()=>{const t=document.getElementById("scatter-chart-cf").getBoundingClientRect();y(E,d=0==d?t.width:d,d),y(C,a=0==a?t.height:a,a)}));const m={top:50,bottom:3,left:30,right:30},h=L(".2r");const x=j([{x:0,y:0},{x:0,y:0}],{duration:200,easing:k});return p(t,x,(t=>o(6,f=t))),t.$$.update=()=>{8&t.$$.dirty&&o(1,l=Y().domain([0,100]).range([m.left,d-m.right])),4&t.$$.dirty&&o(0,s=Y().domain([0,100]).range([a-m.bottom,m.top])),6144&t.$$.dirty&&x.set([{x:0,y:i+0*r},{x:105,y:i+105*r}]),3&t.$$.dirty&&o(4,n=A().x((t=>l(t.x))).y((t=>s(t.y))))},[s,l,a,d,n,c,f,m,h,function(t){const e=B("#x-axis-line").attr("y1"),o=B("#y-axis-line").attr("x1"),n=B("#chart-subtitle").attr("y"),a={cx:t.offsetX,cy:t.offsetY};if(t.offsetX>o&&t.offsetY<e&&t.offsetY>n){y(_,c=c.concat(a),c);const t=c.map((t=>l.invert(t.cx))),e=c.map((t=>s.invert(t.cy))),o=$(t,e);y(v,r=o[0],r),y(w,i=o[1],i)}},x,r,i,function(){d=this.offsetWidth,E.set(d),a=this.offsetHeight,C.set(a)}]}class z extends t{constructor(t){super(),e(this,t,W,U,o,{})}}export{z as default};
