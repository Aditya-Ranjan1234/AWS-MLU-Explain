import{SvelteComponent as t,init as e,safe_not_equal as l,element as n,svg_element as o,empty as s,text as r,attr as c,add_render_callback as i,insert as a,append as f,add_resize_listener as d,noop as m,detach as h,destroy_each as x,component_subscribe as y,set_data as u,identity as p}from"../../node_modules/svelte/internal/index.mjs.js";import{tweened as g}from"../../node_modules/svelte/motion/index.mjs.js";import{interpretationData as k}from"../datasets.js";import{marginScroll as v,intercept as b,coeff as $,showResiduals as q,showRegressionLine as w,sqft as j,showHighlight as M}from"../store.js";import{format as _}from"../../node_modules/d3-format/src/defaultLocale.js";import A from"../../node_modules/d3-array/src/max.js";import L from"../../node_modules/d3-scale/src/linear.js";import H from"../../node_modules/d3-shape/src/line.js";import P from"../../node_modules/d3-shape/src/curve/natural.js";import S from"../../node_modules/d3-selection/src/selectAll.js";function z(t,e,l){const n=t.slice();return n[21]=e[l],n}function N(t,e,l){const n=t.slice();return n[21]=e[l],n}function W(t,e,l){const n=t.slice();return n[26]=e[l],n[28]=l,n}function B(t,e,l){const n=t.slice();return n[26]=e[l],n}function C(t){let e,l,n,s,i,d,m=t[26]+"";return{c(){e=o("g"),l=o("line"),s=o("text"),i=r(m),c(l,"class","grid-line svelte-cvwkc4"),c(l,"x1","0"),c(l,"x2","0"),c(l,"y1","0"),c(l,"y2",n=-t[0]+t[4].bottom+t[4].top),c(l,"stroke","black"),c(l,"stroke-dasharray","4"),c(s,"class","axis-text svelte-cvwkc4"),c(s,"y","15"),c(s,"text-anchor","middle"),c(e,"transform",d=`translate(${t[3](t[26])+0} ${t[0]-t[4].bottom})`)},m(t,n){a(t,e,n),f(e,l),f(e,s),f(s,i)},p(t,o){17&o&&n!==(n=-t[0]+t[4].bottom+t[4].top)&&c(l,"y2",n),8&o&&m!==(m=t[26]+"")&&u(i,m),25&o&&d!==(d=`translate(${t[3](t[26])+0} ${t[0]-t[4].bottom})`)&&c(e,"transform",d)},d(t){t&&h(e)}}}function D(t){let e,l,n,s,i=t[28]%2==0&&function(t){let e,l,n=t[14](t[26])+"";return{c(){e=o("text"),l=r(n),c(e,"class","axis-text svelte-cvwkc4"),c(e,"y","0"),c(e,"text-anchor","end"),c(e,"dominant-baseline","middle")},m(t,n){a(t,e,n),f(e,l)},p(t,e){4&e&&n!==(n=t[14](t[26])+"")&&u(l,n)},d(t){t&&h(e)}}}(t);return{c(){e=o("g"),l=o("line"),i&&i.c(),c(l,"class","grid-line svelte-cvwkc4"),c(l,"x1",5),c(l,"x2",n=t[1]-t[4].right),c(l,"y1","0"),c(l,"y2","0"),c(l,"stroke","black"),c(l,"stroke-dasharray","4"),c(e,"transform",s=`translate(${t[4].left-5} ${t[2](t[26])+0})`)},m(t,n){a(t,e,n),f(e,l),i&&i.m(e,null)},p(t,o){18&o&&n!==(n=t[1]-t[4].right)&&c(l,"x2",n),t[28]%2==0&&i.p(t,o),20&o&&s!==(s=`translate(${t[4].left-5} ${t[2](t[26])+0})`)&&c(e,"transform",s)},d(t){t&&h(e),i&&i.d()}}}function E(t){let e,l,n,s,r;return{c(){e=o("line"),c(e,"class","residual-line svelte-cvwkc4"),c(e,"x1",l=t[3](t[21].sqft)),c(e,"x2",n=t[3](t[21].sqft)),c(e,"y1",s=t[2](t[21].price)),c(e,"y2",r=t[2](t[21].y))},m(t,l){a(t,e,l)},p(t,o){264&o&&l!==(l=t[3](t[21].sqft))&&c(e,"x1",l),264&o&&n!==(n=t[3](t[21].sqft))&&c(e,"x2",n),260&o&&s!==(s=t[2](t[21].price))&&c(e,"y1",s),260&o&&r!==(r=t[2](t[21].y))&&c(e,"y2",r)},d(t){t&&h(e)}}}function F(t){let e,l=t[9]&&E(t);return{c(){l&&l.c(),e=s()},m(t,n){l&&l.m(t,n),a(t,e,n)},p(t,n){t[9]?l?l.p(t,n):(l=E(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&h(e)}}}function G(t){let e,l;return{c(){e=o("path"),c(e,"class","regression-line svelte-cvwkc4"),c(e,"d",l=t[7](t[11]))},m(t,l){a(t,e,l)},p(t,n){2176&n&&l!==(l=t[7](t[11]))&&c(e,"d",l)},d(t){t&&h(e)}}}function I(t){let e,l,n;return{c(){e=o("circle"),c(e,"class","regression-circle svelte-cvwkc4"),c(e,"fill","#c9208a"),c(e,"stroke","black"),c(e,"stroke-width","1.5"),c(e,"r","5.5"),c(e,"cx",l=t[3](t[21].sqft)),c(e,"cy",n=t[2](t[21].price))},m(t,l){a(t,e,l)},p(t,o){264&o&&l!==(l=t[3](t[21].sqft))&&c(e,"cx",l),260&o&&n!==(n=t[2](t[21].price))&&c(e,"cy",n)},d(t){t&&h(e)}}}function J(t){let e,l,n,s,i,d,m,x,y,p,g=t[14](t[5]+t[6]*t[12])+"";return{c(){e=o("text"),l=r("Sqft: "),n=r(t[12]),d=o("text"),m=r("Price: "),x=r(g),c(e,"class","highlight-text svelte-cvwkc4"),c(e,"text-anchor","middle"),c(e,"y",s=t[2](t[5]+t[6]*t[12])+16),c(e,"x",i=t[3](t[12])),c(d,"class","highlight-text svelte-cvwkc4"),c(d,"text-anchor","middle"),c(d,"y",y=t[2](t[5]+t[6]*t[12])),c(d,"x",p=t[3](t[12]))},m(t,o){a(t,e,o),f(e,l),f(e,n),a(t,d,o),f(d,m),f(d,x)},p(t,l){4096&l&&u(n,t[12]),4196&l&&s!==(s=t[2](t[5]+t[6]*t[12])+16)&&c(e,"y",s),4104&l&&i!==(i=t[3](t[12]))&&c(e,"x",i),4192&l&&g!==(g=t[14](t[5]+t[6]*t[12])+"")&&u(x,g),4196&l&&y!==(y=t[2](t[5]+t[6]*t[12]))&&c(d,"y",y),4104&l&&p!==(p=t[3](t[12]))&&c(d,"x",p)},d(t){t&&h(e),t&&h(d)}}}function K(t){let e,l,y,u,p,g,k,v,b,$,q,w,j,M,_,A,L,H,P,S,E,K,O,Q,R,T,U,V,X,Y,Z,tt,et,lt,nt,ot,st,rt=t[3].ticks(),ct=[];for(let e=0;e<rt.length;e+=1)ct[e]=C(B(t,rt,e));let it=t[2].ticks(),at=[];for(let e=0;e<it.length;e+=1)at[e]=D(W(t,it,e));let ft=t[8],dt=[];for(let e=0;e<ft.length;e+=1)dt[e]=F(N(t,ft,e));let mt=t[10]&&G(t),ht=t[8],xt=[];for(let e=0;e<ht.length;e+=1)xt[e]=I(z(t,ht,e));let yt=t[13]&&J(t);return{c(){e=n("div"),l=o("svg");for(let t=0;t<ct.length;t+=1)ct[t].c();y=s();for(let t=0;t<at.length;t+=1)at[t].c();u=o("line"),v=o("line"),j=o("text"),M=r("Size of House (sqft)"),L=o("text"),H=r("Housing Price ($)");for(let t=0;t<dt.length;t+=1)dt[t].c();E=s(),mt&&mt.c(),K=s();for(let t=0;t<xt.length;t+=1)xt[t].c();O=o("circle"),T=o("line"),Z=o("line"),yt&&yt.c(),c(u,"class","axis-line"),c(u,"y1",p=t[0]-t[4].bottom),c(u,"y2",g=t[0]-t[4].bottom),c(u,"x1",k=t[4].left),c(u,"x2",t[1]),c(u,"stroke","black"),c(u,"stroke-width","1"),c(v,"class","axis-line"),c(v,"y1",b=t[4].top),c(v,"y2",$=t[0]-t[4].bottom),c(v,"x1",q=t[4].left),c(v,"x2",w=t[4].left),c(v,"stroke","black"),c(v,"stroke-width","1"),c(j,"class","axis-label svelte-cvwkc4"),c(j,"y",_=t[0]+t[4].bottom),c(j,"x",A=(t[1]+t[4].left)/2),c(j,"text-anchor","middle"),c(L,"class","axis-label svelte-cvwkc4"),c(L,"y",P=t[4].left/4.8),c(L,"x",S=-t[0]/2),c(L,"text-anchor","middle"),c(L,"transform","rotate(-90)"),c(O,"class","highlight-circle"),c(O,"r","7.5"),c(O,"fill","none"),c(O,"stroke","black"),c(O,"opacity","0"),c(O,"cx",Q=t[3](t[12])),c(O,"cy",R=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12])),c(T,"class","annotation-line svelte-cvwkc4"),c(T,"x1",U=t[3](t[12])),c(T,"x2",V=t[3](t[12])),c(T,"y1",X=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12])),c(T,"y2",Y=t[2](0)),c(T,"stroke","black"),c(T,"opacity","0"),c(Z,"class","annotation-line svelte-cvwkc4"),c(Z,"x1",tt=t[3](0)),c(Z,"x2",et=t[3](t[12])),c(Z,"y1",lt=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12])),c(Z,"y2",nt=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12])),c(Z,"stroke","black"),c(Z,"opacity","0"),c(l,"width",t[1]),c(l,"height",ot=t[0]+t[4].top+t[4].bottom),c(e,"id","scatter-chart"),c(e,"class","svelte-cvwkc4"),i((()=>t[19].call(e)))},m(n,o){a(n,e,o),f(e,l);for(let t=0;t<ct.length;t+=1)ct[t].m(l,null);f(l,y);for(let t=0;t<at.length;t+=1)at[t].m(l,null);f(l,u),f(l,v),f(l,j),f(j,M),f(l,L),f(L,H);for(let t=0;t<dt.length;t+=1)dt[t].m(l,null);f(l,E),mt&&mt.m(l,null),f(l,K);for(let t=0;t<xt.length;t+=1)xt[t].m(l,null);f(l,O),f(l,T),f(l,Z),yt&&yt.m(l,null),st=d(e,t[19].bind(e))},p(t,[e]){if(25&e){let n;for(rt=t[3].ticks(),n=0;n<rt.length;n+=1){const o=B(t,rt,n);ct[n]?ct[n].p(o,e):(ct[n]=C(o),ct[n].c(),ct[n].m(l,y))}for(;n<ct.length;n+=1)ct[n].d(1);ct.length=rt.length}if(16406&e){let n;for(it=t[2].ticks(),n=0;n<it.length;n+=1){const o=W(t,it,n);at[n]?at[n].p(o,e):(at[n]=D(o),at[n].c(),at[n].m(l,u))}for(;n<at.length;n+=1)at[n].d(1);at.length=it.length}if(17&e&&p!==(p=t[0]-t[4].bottom)&&c(u,"y1",p),17&e&&g!==(g=t[0]-t[4].bottom)&&c(u,"y2",g),16&e&&k!==(k=t[4].left)&&c(u,"x1",k),2&e&&c(u,"x2",t[1]),16&e&&b!==(b=t[4].top)&&c(v,"y1",b),17&e&&$!==($=t[0]-t[4].bottom)&&c(v,"y2",$),16&e&&q!==(q=t[4].left)&&c(v,"x1",q),16&e&&w!==(w=t[4].left)&&c(v,"x2",w),17&e&&_!==(_=t[0]+t[4].bottom)&&c(j,"y",_),18&e&&A!==(A=(t[1]+t[4].left)/2)&&c(j,"x",A),16&e&&P!==(P=t[4].left/4.8)&&c(L,"y",P),1&e&&S!==(S=-t[0]/2)&&c(L,"x",S),780&e){let n;for(ft=t[8],n=0;n<ft.length;n+=1){const o=N(t,ft,n);dt[n]?dt[n].p(o,e):(dt[n]=F(o),dt[n].c(),dt[n].m(l,E))}for(;n<dt.length;n+=1)dt[n].d(1);dt.length=ft.length}if(t[10]?mt?mt.p(t,e):(mt=G(t),mt.c(),mt.m(l,K)):mt&&(mt.d(1),mt=null),268&e){let n;for(ht=t[8],n=0;n<ht.length;n+=1){const o=z(t,ht,n);xt[n]?xt[n].p(o,e):(xt[n]=I(o),xt[n].c(),xt[n].m(l,O))}for(;n<xt.length;n+=1)xt[n].d(1);xt.length=ht.length}4104&e&&Q!==(Q=t[3](t[12]))&&c(O,"cx",Q),4196&e&&R!==(R=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12]))&&c(O,"cy",R),4104&e&&U!==(U=t[3](t[12]))&&c(T,"x1",U),4104&e&&V!==(V=t[3](t[12]))&&c(T,"x2",V),4196&e&&X!==(X=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12]))&&c(T,"y1",X),4&e&&Y!==(Y=t[2](0))&&c(T,"y2",Y),8&e&&tt!==(tt=t[3](0))&&c(Z,"x1",tt),4104&e&&et!==(et=t[3](t[12]))&&c(Z,"x2",et),4196&e&&lt!==(lt=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12]))&&c(Z,"y1",lt),4196&e&&nt!==(nt=.097===t[6]?t[2](t[5]+t[6]*Math.sqrt(t[12])):t[2](t[5]+t[6]*t[12]))&&c(Z,"y2",nt),t[13]?yt?yt.p(t,e):(yt=J(t),yt.c(),yt.m(l,null)):yt&&(yt.d(1),yt=null),2&e&&c(l,"width",t[1]),17&e&&ot!==(ot=t[0]+t[4].top+t[4].bottom)&&c(l,"height",ot)},i:m,o:m,d(t){t&&h(e),x(ct,t),x(at,t),x(dt,t),mt&&mt.d(),x(xt,t),yt&&yt.d(),st()}}}function O(t,e,l){let n,o,s,r,c,i,a,f,d,m,h,x;y(t,v,(t=>l(4,r=t))),y(t,b,(t=>l(5,i=t))),y(t,$,(t=>l(6,a=t))),y(t,q,(t=>l(9,f=t))),y(t,w,(t=>l(10,d=t))),y(t,j,(t=>l(12,h=t))),y(t,M,(t=>l(13,x=t)));let u=500,z=500;const N=_("$,");const W=A(k,(t=>t.sqft))+25,B=g(k.map((t=>({sqft:t.sqft,y:t.sqft*a+i,price:t.price}))),{duration:500,easing:p});y(t,B,(t=>l(8,c=t)));const C=g([{x:0,y:0*a+i},{x:400,y:400*a+i},{x:W,y:W*a+i}],{duration:500,easing:p});return y(t,C,(t=>l(11,m=t))),c.sort(((t,e)=>e.y-t.y)),t.$$.update=()=>{96&t.$$.dirty&&B.set(k.map((t=>({sqft:t.sqft,y:t.sqft*a+i,price:t.price})))),96&t.$$.dirty&&C.set([{x:0,y:0*a+i},{x:400,y:400*a+i},{x:W,y:W*a+i}]),18&t.$$.dirty&&l(3,n=L().domain([0,W]).range([r.left,z-r.right])),17&t.$$.dirty&&l(2,o=L().domain([0,A(k,(t=>t.price))]).range([u-r.bottom,r.top])),12&t.$$.dirty&&l(7,s=H().x((t=>n(t.x))).y((t=>o(t.y))).curve(P))},[u,z,o,n,r,i,a,s,c,f,d,m,h,x,N,B,C,function(){S(".annotation-line").attr("opacity",.5)},function(){S(".annotation-line").attr("opacity",0)},function(){z=this.offsetWidth,u=this.offsetHeight,l(1,z),l(0,u)}]}class Q extends t{constructor(t){super(),e(this,t,O,K,l,{showAnnotationLines:17,hideAnnotationLines:18})}get showAnnotationLines(){return this.$$.ctx[17]}get hideAnnotationLines(){return this.$$.ctx[18]}}export{Q as default};
