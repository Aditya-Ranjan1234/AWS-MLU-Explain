import{SvelteComponent as n,init as e,safe_not_equal as t,element as i,text as a,space as r,create_component as s,attr as o,insert as c,append as l,mount_component as d,listen as $,transition_in as m,transition_out as x,detach as h,destroy_component as b,component_subscribe as u,HtmlTag as g,set_store_value as f,binding_callbacks as p}from"../../node_modules/svelte/internal/index.mjs.js";import y from"../katexify.js";import v from"./ClosedFormScatterplot.svelte.js";import{transpose as w,matrixDot as j}from"../utils.js";import{cfCircles as T,cfBias as q,cfWeight as C}from"../store.js";import{format as S}from"../../node_modules/d3-format/src/defaultLocale.js";function X(n){let e,t,u,f,p,w,j,T,q,C,S,X,_,k,E,z,F,N,R,A,L,M,W,Y,D,H,I,O,V,B,G,J,K,P,Q,U,Z,nn,en,tn,an,rn,sn,on,cn,ln,dn,$n=y("\\begin{aligned} RSS = \\sum^{n}_{i=1}(y_i - \\hat{y_i})^2 \\end{aligned}",!0)+"",mn=y("\\begin{aligned} \\hat{\\beta} = (X^{T}X)^{-1}X^{T}Y \\end{aligned}",!0)+"",xn=y(`\\begin{aligned}\n        \n        \\hat{\\beta} = (X^{T}X)^{-1}X^{T}Y \\\\\n         = \\begin{pmatrix} \n         \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}^T \n            \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}\n            \\end{pmatrix}^{-1} \n            \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}^T \n            \\begin{bmatrix}\n            ${n[1]?.[0]?n[1][0].cy:0} \\\\\n            ${n[1]?.[1]?`${n[1][1].cy} \\\\`:""} \n            ${n[1].length>3?"\\vdots \\\\":n[1]?.[2]?`${n[1][2].cy} \\\\`:""} \n            ${n[1].length>3?`${n[1].at(-1).cy}`:n[1]?.[3]?`${n[1][3].cy}`:""} \n            \\end{bmatrix}\n            \\\\\n\n            \n\n            =  \n            \\begin{pmatrix}\n         \\begin{bmatrix}\n            ${n[0][0][0]} & ${n[0][0][1]} \\\\\n            ${n[0][1][0]} & ${n[0][1][1]}\n            \\end{bmatrix}\n            \\end{pmatrix}^{-1}\n            \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}^T \n            \\begin{bmatrix}\n            ${n[1]?.[0]?n[1][0].cy:0} \\\\\n            ${n[1]?.[1]?`${n[1][1].cy} \\\\`:""} \n            ${n[1].length>3?"\\vdots \\\\":n[1]?.[2]?`${n[1][2].cy} \\\\`:""} \n            ${n[1].length>3?`${n[1].at(-1).cy}`:n[1]?.[3]?`${n[1][3].cy}`:""} \n            \\end{bmatrix}\n\n            \\\\\n            =  \n         \\begin{bmatrix}\n            1 & ${n[1]?.[1]?n[5](n[3]):0} \\\\\n            1 &${n[1]?.[1]?n[5](n[4]):0}\n            \\end{bmatrix}\n            \n            \n        \\end{aligned}\n        \n        \n        `,!0)+"",hn=y("\\beta_i",!1)+"";return A=new v({props:{}}),n[8](A),{c(){e=i("section"),t=i("p"),u=i("span"),u.textContent="A Closed-Form Solution",f=i("br"),p=a("\n    We'd be remiss not to mention the Normal Equation, a widely taught method for\n    obtaining estimates for our linear regression coefficients. The Normal Equation\n    is a closed-form solution that allows us to estimate our coefficients directly\n    by minimizing the "),w=i("i"),w.textContent="residual sum of squares",j=a(" (RSS) of our data:\n    "),T=new g(!1),q=a("\n    The RSS should look familiar - it was a key piece in both the MSE and r-squared\n    formulas that represents our model's total squared error:\n    "),C=new g(!1),S=a("\n    Add circles to the chart below to see how the Normal Equation calculates two\n    featues, the bias and weight, for the corresponding regression model."),X=r(),_=i("div"),k=i("div"),E=i("br"),z=r(),F=i("div"),N=r(),R=i("div"),s(A.$$.fragment),L=r(),M=i("div"),W=i("button"),W.textContent="Reset",Y=r(),D=i("br"),H=i("br"),I=r(),O=i("p"),O.textContent="Despite providing a convenient closed-form solution for finding our optimal\n    coefficients, the Normal Equation estimates are often not used in practice,\n    because of the computational complexity required to invert a matrix with too\n    many features. While our two feature example above runs fast (we can run it\n    in the browser!), most machine learning models are more complicated. For\n    this reason, we often just use gradient descent.",V=r(),B=i("br"),G=r(),J=i("p"),K=i("span"),K.textContent="Are Our Coefficients Valid?",P=i("br"),Q=a("\n    In research publications and statistical software, coefficients of regression\n    models are often presented with associated p-values. These p-values come from\n    traditional null hypothesis statistical tests: t-tests are used to measure whether\n    a given cofficient is significantly different than zero (the null hypothesis\n    that a particular coefficient "),U=new g(!1),Z=a(" equals zero),\n    while F tests are used to measure whether\n    "),nn=i("i"),nn.textContent="any",en=a("\n    of the terms in a regression model are significantly different from zero. Different\n    opinions exist on the utility of such tests (e.g. chapter 10.7 of\n    "),tn=i("a"),tn.textContent="[1]",an=a(" maintains they're not super important). We don't\n    take a strong stance on this issue, but believe practitioners should always assess\n    the standard error around any parameter estimates for themselves and present them\n    in their research."),rn=r(),sn=i("br"),on=i("br"),o(u,"class","bold"),T.a=q,C.a=S,o(t,"class","body-text"),o(F,"id","equation-math"),o(k,"id","equations-container"),o(k,"class","svelte-1u00j9j"),o(R,"id","charts-container"),o(R,"class","svelte-1u00j9j"),o(W,"class","svelte-1u00j9j"),o(M,"class","button-container svelte-1u00j9j"),o(_,"id","cf-container"),o(_,"class","svelte-1u00j9j"),o(O,"class","body-text"),o(K,"class","bold"),U.a=Z,o(tn,"href","#resources"),o(J,"class","body-text")},m(i,a){c(i,e,a),l(e,t),l(t,u),l(t,f),l(t,p),l(t,w),l(t,j),T.m($n,t),l(t,q),C.m(mn,t),l(t,S),l(e,X),l(e,_),l(_,k),l(k,E),l(k,z),l(k,F),F.innerHTML=xn,l(_,N),l(_,R),d(A,R,null),l(_,L),l(_,M),l(M,W),l(e,Y),l(e,D),l(e,H),l(e,I),l(e,O),l(e,V),l(e,B),l(e,G),l(e,J),l(J,K),l(J,P),l(J,Q),U.m(hn,J),l(J,Z),l(J,nn),l(J,en),l(J,tn),l(J,an),l(e,rn),l(e,sn),l(e,on),cn=!0,ln||(dn=$(W,"click",n[6]),ln=!0)},p(n,[e]){(!cn||27&e)&&xn!==(xn=y(`\\begin{aligned}\n        \n        \\hat{\\beta} = (X^{T}X)^{-1}X^{T}Y \\\\\n         = \\begin{pmatrix} \n         \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}^T \n            \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}\n            \\end{pmatrix}^{-1} \n            \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}^T \n            \\begin{bmatrix}\n            ${n[1]?.[0]?n[1][0].cy:0} \\\\\n            ${n[1]?.[1]?`${n[1][1].cy} \\\\`:""} \n            ${n[1].length>3?"\\vdots \\\\":n[1]?.[2]?`${n[1][2].cy} \\\\`:""} \n            ${n[1].length>3?`${n[1].at(-1).cy}`:n[1]?.[3]?`${n[1][3].cy}`:""} \n            \\end{bmatrix}\n            \\\\\n\n            \n\n            =  \n            \\begin{pmatrix}\n         \\begin{bmatrix}\n            ${n[0][0][0]} & ${n[0][0][1]} \\\\\n            ${n[0][1][0]} & ${n[0][1][1]}\n            \\end{bmatrix}\n            \\end{pmatrix}^{-1}\n            \\begin{bmatrix}\n            1 & ${n[1]?.[0]?n[1][0].cx:0} \\\\\n            ${n[1]?.[1]?`1 & ${n[1][1].cx} \\\\`:""} \n            ${n[1].length>3?"\\vdots & \\vdots \\\\":n[1]?.[2]?`1 & ${n[1][2].cx} \\\\`:""} \n            ${n[1].length>3?`1 & ${n[1].at(-1).cx}`:n[1]?.[3]?`1 & ${n[1][3].cx}`:""} \n            \\end{bmatrix}^T \n            \\begin{bmatrix}\n            ${n[1]?.[0]?n[1][0].cy:0} \\\\\n            ${n[1]?.[1]?`${n[1][1].cy} \\\\`:""} \n            ${n[1].length>3?"\\vdots \\\\":n[1]?.[2]?`${n[1][2].cy} \\\\`:""} \n            ${n[1].length>3?`${n[1].at(-1).cy}`:n[1]?.[3]?`${n[1][3].cy}`:""} \n            \\end{bmatrix}\n\n            \\\\\n            =  \n         \\begin{bmatrix}\n            1 & ${n[1]?.[1]?n[5](n[3]):0} \\\\\n            1 &${n[1]?.[1]?n[5](n[4]):0}\n            \\end{bmatrix}\n            \n            \n        \\end{aligned}\n        \n        \n        `,!0)+"")&&(F.innerHTML=xn);A.$set({})},i(n){cn||(m(A.$$.fragment,n),cn=!0)},o(n){x(A.$$.fragment,n),cn=!1},d(t){t&&h(e),n[8](null),b(A),ln=!1,dn()}}}function _(n,e,t){let i,a,r,s,o,c;u(n,T,(n=>t(1,r=n))),u(n,q,(n=>t(3,s=n))),u(n,C,(n=>t(4,o=n)));const l=S(".2f");return n.$$.update=()=>{2&n.$$.dirty&&t(7,i=r.map((n=>[1,n.cx]))),2&n.$$.dirty&&r.map((n=>[n.cy])),130&n.$$.dirty&&r.length>1&&(w(i),j(w(i),i)),130&n.$$.dirty&&t(0,a=r.length>1?j(w(i),i):[[0,0],[0,0]])},[a,r,c,s,o,l,function(){f(T,r=[],r)},i,function(n){p[n?"unshift":"push"]((()=>{c=n,t(2,c)}))}]}class k extends n{constructor(n){super(),e(this,n,_,X,t,{})}}export{k as default};
